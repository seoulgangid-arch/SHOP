<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seoulgang ID - SHOP</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Fredoka+One&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Fredoka One', sans-serif; display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; background: linear-gradient(135deg, #330000, #660000); overflow:hidden; position:relative; }
.emoji-rain { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; overflow:hidden; z-index:-1; }
.emoji { position:absolute; font-size:30px; user-select:none; will-change:transform; }
.welcome-text { font-family:'Pacifico', cursive; font-size:2.6rem; color:#fff; text-align:center; margin-bottom:20px; animation: fadeIn 1s ease forwards, shadow-dance 8s infinite; opacity:0; position: relative; z-index:1; }
@keyframes fadeIn{ to{opacity:1;} }
@keyframes shadow-dance{0%,100%{text-shadow:5px 5px 0 #ff005e,10px 10px 0 #00d4ff;}50%{text-shadow:-5px -5px 0 #00d4ff,-10px -10px 0 #ff005e;}}
.container { display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; background: linear-gradient(145deg, #ff1a1a, #cc0000); border-radius:25px; padding:40px 30px; width:90%; max-width:400px; box-shadow:0 10px 30px rgba(0,0,0,0.3),0 0 20px #ff3333 inset; transform:translateY(-50px); opacity:0; animation: slideIn 1s forwards; position: relative; z-index:1; }
@keyframes slideIn{ to{transform:translateY(0); opacity:1;} }
h1 { font-family:'Pacifico', cursive; font-size:2.42rem; color:#fff; margin-bottom:25px; animation:bounce 2s infinite; }
@keyframes bounce{0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);} }
.g_id_signin{ display:flex !important; justify-content:center !important; width:100% !important; margin-top:15px; }
.register-text{ font-family:'Fredoka One', cursive; font-size:1.2rem; color:#fff; cursor:pointer; text-decoration:underline; transition:0.3s; margin-top:15px; }
.register-text:hover{ color:#ffcccc; text-shadow:0 0 5px #ff6666,0 0 10px #ff3333; }
#register-form{ display:none; flex-direction:column; align-items:center; margin-top:15px; width:100%; }
#register-form input,#register-form button{ width:80%; margin-top:12px; padding:14px; font-size:16px; border-radius:12px; border:none; outline:none; transition:all 0.3s ease; }
#register-form input{ background:#660000; color:#fff; border:2px solid #ff1a1a; box-shadow:2px 2px 8px rgba(0,0,0,0.2); font-family:'Fredoka One', cursive; }
#register-form input:focus{ border-color:#ff3333; box-shadow:2px 2px 12px #ff6666; }
#register-form button{ background: linear-gradient(145deg, #ff1a1a, #ff3333); color:#fff; font-family:'Fredoka One', cursive; font-size:1.1rem; font-weight:bold; cursor:pointer; box-shadow:2px 4px 12px rgba(0,0,0,0.3); }
#register-form button:hover{ background:linear-gradient(145deg,#ff3333,#ff1a1a); transform:translateY(-3px); box-shadow:4px 6px 20px rgba(0,0,0,0.4); }
@media (max-width:480px){ .container{padding:30px 20px;} h1{font-size:1.8rem;} #register-form input,#register-form button{width:90%;} .welcome-text{font-size:2rem;} }
#popup{ display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#ff4d4d; color:#fff; padding:30px 25px; border-radius:20px; box-shadow:0 5px 20px rgba(0,0,0,0.4); z-index:10000; text-align:center; max-width:90%; font-family:'Fredoka One', sans-serif; }
#popup-message{ font-size:1.1rem; margin-bottom:20px; }
#popup-close{ padding:10px 20px; font-size:1rem; font-weight:bold; border:none; border-radius:10px; cursor:pointer; background:#fff; color:#ff3333; transition:0.3s; }
#popup-close:hover{ background:#ffe6e6; }
</style>
</head>
<body>
<h2 class="welcome-text">Welcome to Seoulgang ID! Have fun shopping with us</h2>

<div class="container">
    <h1>Sign in with Google</h1>
    <div id="g_id_onload" data-client_id="314703538838-cp2nm11deeirrtus11290r46v4ugeqdq.apps.googleusercontent.com" data-callback="handleCredentialResponse" data-auto_prompt="false"></div>
    <div class="g_id_signin" data-type="standard" data-theme="outline" data-size="large" data-text="signin_with" data-logo_alignment="left"></div>

    <div class="register-text" onclick="showRegisterForm()">Register with Gmail</div>
    <div id="register-form">
        <input type="email" id="register-email" placeholder="Enter your Gmail" required>
        <button onclick="submitRegister()">Submit</button>
    </div>
</div>

<div class="emoji-rain" id="emoji-rain"></div>

<div id="popup">
    <p id="popup-message">Message here</p>
    <button id="popup-close">Close</button>
</div>

<script src="https://accounts.google.com/gsi/client" async defer></script>
<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwWRGpwzUgpCS0vuABGZw5xXuISPxgLksJSDTp_s8TplJM_EASQKfn84Ef2IS6s6caapw/exec";
const GOOGLE_FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSdra6gvbX3oCHll9EPk4fUZCpAm9J0Npa-WZwBT9ThyjUvI8g/formResponse";

function popupMsg(msg){
    const popup = document.getElementById("popup");
    const msgEl = document.getElementById("popup-message");
    msgEl.textContent = msg;
    popup.style.display = "block";
    popup.style.opacity = 0;
    popup.animate([{opacity:0},{opacity:1}],{duration:300,fill:'forwards'});
}

function showRegisterForm(){
    const form = document.getElementById("register-form");
    form.style.display = "flex";
    form.style.opacity = 0;
    form.animate([{opacity:0},{opacity:1}],{duration:500,fill:'forwards'});
}

function submitRegister(){
    const email = document.getElementById("register-email").value.trim();
    if(!email || !email.toLowerCase().endsWith("@gmail.com")){
        popupMsg("Hey! ğŸ˜¡ What is this?! Only Gmail addresses allowed! Try again, seriously!");
        return;
    }

    fetch(WEB_APP_URL+"?email="+encodeURIComponent(email))
    .then(res => res.text())
    .then(status => {
        if(status === "duplicate"){
            popupMsg("Email already exists. Cannot register again ğŸ˜¡");
        } else if(status === "approved"){
            popupMsg("User already registered ğŸ˜");
        } else {
            submitToGoogleForm(email);
        }
    })
    .catch(err => {
        popupMsg("Error contacting server. Try again later!");
        console.error(err);
    });
}

function submitToGoogleForm(email){
    const formData = new FormData();
    formData.append("entry.1841453535", email);
    fetch(GOOGLE_FORM_URL, {method:"POST", body: formData, mode:"no-cors"})
    .then(()=>{
        popupMsg(`Cheers, ${email}! ğŸ¾ Your registration is submitted successfully!`);
        document.getElementById("register-email").value = "";
        document.getElementById("register-form").style.display = "none";
    });
}

document.getElementById("popup-close").addEventListener("click",()=>{
    const popup = document.getElementById("popup");
    popup.animate([{opacity:1},{opacity:0}],{duration:300,fill:'forwards'});
    setTimeout(()=>{ popup.style.display = "none"; },300);
});

// Emoji DVD-style bounce background
const emojiList = ["ğŸ›’","ğŸ›ï¸","ğŸ·ï¸","ğŸ”–","ğŸ‘œ","ğŸ‘","ğŸ","ğŸ€","ğŸ‘—","ğŸ‘š","ğŸ‘•","ğŸ‘–","ğŸ‘”","ğŸ‘™","ğŸ‘Ÿ","ğŸ‘ ","ğŸ‘¡","ğŸ‘¢","ğŸ‘’","ğŸ©","ğŸ§¢","ğŸ‘“","ğŸ•¶ï¸","ğŸ§¤","ğŸ§£","ğŸ§¦","ğŸ‘›","ğŸ’„","ğŸ’","âŒš","ğŸ¬","ğŸª","ğŸ’³","ğŸ’µ","ğŸ’°","ğŸª™","ğŸ’¸","ğŸ“¦","ğŸ¥¡","ğŸ«","ğŸ·"];
const rainContainer = document.getElementById("emoji-rain");
const emojis = [];
for(let i=0;i<25;i++){
    const div = document.createElement("div");
    div.className = "emoji";
    div.textContent = emojiList[Math.floor(Math.random()*emojiList.length)];
    const size = 25 + Math.random()*20;
    div.style.fontSize = size + "px";
    rainContainer.appendChild(div);
    emojis.push({el:div,x:Math.random()*(window.innerWidth-size),y:Math.random()*(window.innerHeight-size),vx:(Math.random()*0.5+0.3)*(Math.random()<0.5?-1:1),vy:(Math.random()*0.5+0.3)*(Math.random()<0.5?-1:1),size:size});
}
function animateEmojis(){
    emojis.forEach(e=>{
        e.x += e.vx; e.y += e.vy;
        if(e.x<0){ e.x=0; e.vx*=-1; }
        if(e.x+e.size>window.innerWidth){ e.x=window.innerWidth-e.size; e.vx*=-1; }
        if(e.y<0){ e.y=0; e.vy*=-1; }
        if(e.y+e.size>window.innerHeight){ e.y=window.innerHeight-e.size; e.vy*=-1; }
        e.el.style.transform = `translate(${e.x}px,${e.y}px)`;
    });
    requestAnimationFrame(animateEmojis);
}
animateEmojis();
</script>
</body>
</html>
